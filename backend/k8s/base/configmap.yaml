---
apiVersion: v1
kind: ConfigMap
metadata:
  name: xcodereview-backend-config
  labels:
    app: xcodereview-backend
    component: config
data:
  # Application Configuration
  APP_NAME: "XCodeReviewer"
  APP_VERSION: "2.0.0"
  DEBUG: "false"
  API_PREFIX: "/api/v1"
  
  # Server Configuration
  HOST: "0.0.0.0"
  PORT: "8000"
  WORKERS: "4"
  
  # CORS Configuration
  CORS_ORIGINS: '["http://localhost:5173","http://localhost:3000"]'
  
  # Database Configuration
  DATABASE_POOL_SIZE: "20"
  DATABASE_MAX_OVERFLOW: "10"
  USE_LOCAL_DB: "false"
  
  # Redis Configuration
  REDIS_URL: "redis://xcodereview-redis:6379/0"
  REDIS_MAX_CONNECTIONS: "50"
  
  # Celery Configuration
  CELERY_BROKER_URL: "redis://xcodereview-redis:6379/1"
  CELERY_RESULT_BACKEND: "redis://xcodereview-redis:6379/2"
  
  # MinIO/S3 Configuration
  MINIO_ENDPOINT: "xcodereview-minio:9000"
  MINIO_BUCKET: "xcodereviewer"
  MINIO_SECURE: "false"
  
  # JWT Configuration
  ALGORITHM: "HS256"
  ACCESS_TOKEN_EXPIRE_MINUTES: "1440"
  REFRESH_TOKEN_EXPIRE_DAYS: "30"
  
  # LLM Configuration
  LLM_DEFAULT_PROVIDER: "gemini"
  LLM_TIMEOUT: "150"
  LLM_MAX_RETRIES: "3"
  LLM_CACHE_TTL: "86400"
  
  # Task Configuration
  MAX_ANALYZE_FILES: "40"
  LLM_CONCURRENCY: "2"
  LLM_GAP_MS: "500"
  
  # Rate Limiting Configuration
  RATE_LIMIT_PER_MINUTE: "60"
  RATE_LIMIT_PER_HOUR: "1000"
  
  # Monitoring Configuration
  PROMETHEUS_PORT: "9090"
  
  # Tracing Configuration
  TRACING_ENABLED: "true"
  OTLP_ENDPOINT: "http://jaeger-collector:4317"
  
  # Logging Configuration
  LOG_LEVEL: "INFO"
  LOG_FILE: "logs/app.log"
  LOG_ROTATION: "500 MB"
  LOG_RETENTION: "30 days"
  
  # Multi-Agent Configuration
  AGENT_MAX_ITERATIONS: "10"
  AGENT_TIMEOUT: "300"
  AGENT_MEMORY_SIZE: "100"
  
  # Vector Database Configuration
  QDRANT_URL: "http://xcodereview-qdrant:6333"
  VECTOR_DIMENSION: "1536"
