# Production Environment Configuration
# IMPORTANT: Replace all placeholder values with actual production credentials
# Never commit this file with real credentials to version control

# Application
APP_NAME=XCodeReviewer
APP_ENV=production
DEBUG=false
LOG_LEVEL=INFO

# Server
HOST=0.0.0.0
PORT=8000
RELOAD=false
WORKERS=4

# Database - PostgreSQL with connection pooling
DATABASE_URL=postgresql+asyncpg://username:password@db-host:5432/xcodereviewer_prod
DATABASE_POOL_SIZE=20
DATABASE_MAX_OVERFLOW=10
DATABASE_POOL_TIMEOUT=30
DATABASE_POOL_RECYCLE=3600

# Redis Cluster
REDIS_URL=redis://redis-host:6379/0
REDIS_MAX_CONNECTIONS=50
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5

# Security - MUST BE CHANGED
SECRET_KEY=CHANGE-THIS-TO-A-SECURE-RANDOM-STRING-MIN-32-CHARS
JWT_SECRET_KEY=CHANGE-THIS-TO-A-DIFFERENT-SECURE-RANDOM-STRING
JWT_ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=15
REFRESH_TOKEN_EXPIRE_DAYS=7

# Password Policy
PASSWORD_MIN_LENGTH=12
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_DIGITS=true
PASSWORD_REQUIRE_SPECIAL=true

# CORS - Restrict to production domains
CORS_ORIGINS=["https://your-domain.com","https://www.your-domain.com"]
CORS_ALLOW_CREDENTIALS=true

# Celery
CELERY_BROKER_URL=redis://redis-host:6379/1
CELERY_RESULT_BACKEND=redis://redis-host:6379/2
CELERY_TASK_ALWAYS_EAGER=false
CELERY_WORKER_CONCURRENCY=4
CELERY_WORKER_MAX_TASKS_PER_CHILD=1000
CELERY_TASK_TIME_LIMIT=3600
CELERY_TASK_SOFT_TIME_LIMIT=3300

# Storage - MinIO/S3
STORAGE_TYPE=minio
MINIO_ENDPOINT=minio-host:9000
MINIO_ACCESS_KEY=CHANGE-THIS-ACCESS-KEY
MINIO_SECRET_KEY=CHANGE-THIS-SECRET-KEY
MINIO_BUCKET=xcodereviewer-prod
MINIO_SECURE=true
MINIO_REGION=us-east-1

# LLM Providers - Production API Keys
LLM_MODE=production

# OpenAI
OPENAI_API_KEY=sk-prod-your-openai-api-key
OPENAI_MODEL=gpt-4
OPENAI_MAX_TOKENS=2000
OPENAI_TIMEOUT=60

# Anthropic Claude
ANTHROPIC_API_KEY=sk-ant-prod-your-anthropic-key
ANTHROPIC_MODEL=claude-3-sonnet-20240229
ANTHROPIC_MAX_TOKENS=4000

# Google Gemini
GOOGLE_API_KEY=your-production-google-api-key
GEMINI_MODEL=gemini-pro
GEMINI_SAFETY_SETTINGS=strict

# Ollama (if self-hosted)
OLLAMA_BASE_URL=http://ollama-service:11434
OLLAMA_MODEL=codellama

# Chinese LLM Providers
QWEN_API_KEY=your-production-qwen-key
QWEN_MODEL=qwen-turbo
DEEPSEEK_API_KEY=your-production-deepseek-key
DEEPSEEK_MODEL=deepseek-coder
ZHIPU_API_KEY=your-production-zhipu-key
ZHIPU_MODEL=glm-4

# GitHub Integration
GITHUB_TOKEN=ghp_your_production_github_token
GITHUB_API_URL=https://api.github.com

# GitLab Integration
GITLAB_TOKEN=glpat-your-production-gitlab-token
GITLAB_URL=https://gitlab.com

# Rate Limiting
RATE_LIMIT_ENABLED=true
RATE_LIMIT_PER_MINUTE=30
RATE_LIMIT_PER_HOUR=500
RATE_LIMIT_STORAGE=redis

# Circuit Breaker
CIRCUIT_BREAKER_ENABLED=true
CIRCUIT_BREAKER_FAILURE_THRESHOLD=5
CIRCUIT_BREAKER_TIMEOUT=60
CIRCUIT_BREAKER_HALF_OPEN_TIMEOUT=30

# Monitoring & Observability
ENABLE_METRICS=true
METRICS_PORT=9090
PROMETHEUS_MULTIPROC_DIR=/tmp/prometheus

# Sentry Error Tracking
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
SENTRY_ENVIRONMENT=production
SENTRY_TRACES_SAMPLE_RATE=0.1

# Logging
LOG_FORMAT=json
LOG_FILE=/var/log/xcodereviewer/app.log
LOG_ROTATION=1 day
LOG_RETENTION=30 days
LOG_COMPRESSION=gzip

# Health Checks
HEALTH_CHECK_INTERVAL=30
READINESS_CHECK_TIMEOUT=5

# Backup
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30
BACKUP_S3_BUCKET=xcodereviewer-backups

# Feature Flags
ENABLE_WEBSOCKET=true
ENABLE_BACKGROUND_TASKS=true
ENABLE_CACHING=true
ENABLE_RATE_LIMITING=true

# API Documentation
ENABLE_SWAGGER=false
ENABLE_REDOC=true
API_DOCS_URL=/api/docs

# Performance
GUNICORN_WORKERS=4
GUNICORN_WORKER_CLASS=uvicorn.workers.UvicornWorker
GUNICORN_TIMEOUT=120
GUNICORN_KEEPALIVE=5
GUNICORN_MAX_REQUESTS=1000
GUNICORN_MAX_REQUESTS_JITTER=100

# SSL/TLS
SSL_CERT_PATH=/etc/ssl/certs/xcodereviewer.crt
SSL_KEY_PATH=/etc/ssl/private/xcodereviewer.key

# Email (for notifications)
SMTP_HOST=smtp.your-provider.com
SMTP_PORT=587
SMTP_USER=notifications@your-domain.com
SMTP_PASSWORD=your-smtp-password
SMTP_FROM=noreply@your-domain.com
SMTP_TLS=true

# Maintenance Mode
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE=System is under maintenance. Please try again later.
