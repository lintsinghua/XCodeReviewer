# å¸¸è§é—®é¢˜ (FAQ)

æœ¬æ–‡æ¡£æ”¶é›†äº† XCodeReviewer ä½¿ç”¨è¿‡ç¨‹ä¸­çš„å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆã€‚

## ç›®å½•

- [å¿«é€Ÿå…¥é—¨](#å¿«é€Ÿå…¥é—¨)
- [LLM é…ç½®](#llm-é…ç½®)
- [ç½‘ç»œé—®é¢˜](#ç½‘ç»œé—®é¢˜)
- [åŠŸèƒ½ä½¿ç”¨](#åŠŸèƒ½ä½¿ç”¨)
- [éƒ¨ç½²é—®é¢˜](#éƒ¨ç½²é—®é¢˜)
- [æ€§èƒ½ä¼˜åŒ–](#æ€§èƒ½ä¼˜åŒ–)

---

## å¿«é€Ÿå…¥é—¨

### Q: å¦‚ä½•å¿«é€Ÿå¼€å§‹ä½¿ç”¨ï¼Ÿ

æœ€å¿«çš„æ–¹å¼æ˜¯ä½¿ç”¨ Docker Composeï¼š

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/lintsinghua/XCodeReviewer.git
cd XCodeReviewer

# 2. é…ç½® LLM API Key
cp backend/env.example backend/.env
# ç¼–è¾‘ backend/.envï¼Œå¡«å…¥ä½ çš„ API Key

# 3. å¯åŠ¨æœåŠ¡
docker-compose up -d

# 4. è®¿é—® http://localhost:5173
```

### Q: æ¼”ç¤ºè´¦æˆ·æ˜¯ä»€ä¹ˆï¼Ÿ

ç³»ç»Ÿå¯åŠ¨æ—¶ä¼šè‡ªåŠ¨åˆ›å»ºæ¼”ç¤ºè´¦æˆ·ï¼ŒåŒ…å«ç¤ºä¾‹é¡¹ç›®å’Œå®¡è®¡æ•°æ®ï¼š

- ğŸ“§ é‚®ç®±ï¼š`demo@example.com`
- ğŸ”‘ å¯†ç ï¼š`demo123`

æ¼”ç¤ºè´¦æˆ·æ‹¥æœ‰ç®¡ç†å‘˜æƒé™ï¼Œå¯ä½“éªŒæ‰€æœ‰åŠŸèƒ½ã€‚ç”Ÿäº§ç¯å¢ƒè¯·åˆ é™¤æˆ–ä¿®æ”¹å¯†ç ã€‚

### Q: ä¸æƒ³ç”¨ Dockerï¼Œå¦‚ä½•æœ¬åœ°è¿è¡Œï¼Ÿ

å‚è§ [éƒ¨ç½²æŒ‡å— - æœ¬åœ°å¼€å‘éƒ¨ç½²](DEPLOYMENT.md#æœ¬åœ°å¼€å‘éƒ¨ç½²)ã€‚

### Q: æ”¯æŒå“ªäº›ç¼–ç¨‹è¯­è¨€ï¼Ÿ

XCodeReviewer æ”¯æŒæ‰€æœ‰ä¸»æµç¼–ç¨‹è¯­è¨€çš„ä»£ç åˆ†æï¼ŒåŒ…æ‹¬ä½†ä¸é™äºï¼š

- **Web**: JavaScript, TypeScript, HTML, CSS
- **åç«¯**: Python, Java, Go, Rust, C/C++, C#
- **ç§»åŠ¨ç«¯**: Swift, Kotlin, Dart
- **è„šæœ¬**: Shell, PowerShell, Ruby, PHP
- **å…¶ä»–**: SQL, YAML, JSON, Markdown

---

## LLM é…ç½®

### Q: å¦‚ä½•å¿«é€Ÿåˆ‡æ¢ LLM å¹³å°ï¼Ÿ

**æ–¹å¼ä¸€ï¼šæµè§ˆå™¨è¿è¡Œæ—¶é…ç½®ï¼ˆæ¨èï¼‰**

1. è®¿é—® `http://localhost:5173/admin` ç³»ç»Ÿç®¡ç†é¡µé¢
2. åœ¨"ç³»ç»Ÿé…ç½®"æ ‡ç­¾é¡µé€‰æ‹©ä¸åŒçš„ LLM æä¾›å•†
3. å¡«å…¥å¯¹åº”çš„ API Key
4. ä¿å­˜å³å¯ï¼Œæ— éœ€é‡å¯

**æ–¹å¼äºŒï¼šä¿®æ”¹åç«¯ç¯å¢ƒå˜é‡**

ç¼–è¾‘ `backend/.env`ï¼š

```env
# åˆ‡æ¢åˆ° OpenAI
LLM_PROVIDER=openai
LLM_API_KEY=sk-your-key

# åˆ‡æ¢åˆ°é€šä¹‰åƒé—®
LLM_PROVIDER=qwen
LLM_API_KEY=sk-your-dashscope-key

# åˆ‡æ¢åˆ° DeepSeek
LLM_PROVIDER=deepseek
LLM_API_KEY=sk-your-key
```

ä¿®æ”¹åéœ€è¦é‡å¯åç«¯æœåŠ¡ã€‚

### Q: ç™¾åº¦æ–‡å¿ƒä¸€è¨€çš„ API Key æ ¼å¼æ˜¯ä»€ä¹ˆï¼Ÿ

ç™¾åº¦éœ€è¦åŒæ—¶æä¾› API Key å’Œ Secret Keyï¼Œç”¨å†’å·åˆ†éš”ï¼š

```env
LLM_PROVIDER=baidu
LLM_API_KEY=your_api_key:your_secret_key
LLM_MODEL=ernie-bot-4
```

è·å–åœ°å€ï¼šhttps://console.bce.baidu.com/qianfan/

### Q: å¦‚ä½•ä½¿ç”¨ Ollama æœ¬åœ°å¤§æ¨¡å‹ï¼Ÿ

```bash
# 1. å®‰è£… Ollama
curl -fsSL https://ollama.com/install.sh | sh  # macOS/Linux
# Windows: è®¿é—® https://ollama.com/download

# 2. æ‹‰å–æ¨¡å‹
ollama pull llama3  # æˆ– codellamaã€qwen2.5ã€deepseek-coder

# 3. ç¡®ä¿ Ollama æœåŠ¡è¿è¡Œ
ollama serve

# 4. é…ç½®åç«¯
# åœ¨ backend/.env ä¸­è®¾ç½®ï¼š
LLM_PROVIDER=ollama
LLM_MODEL=llama3
LLM_BASE_URL=http://localhost:11434/v1
```

**æ¨èæ¨¡å‹**ï¼š
- `llama3` - ç»¼åˆèƒ½åŠ›å¼º
- `codellama` - ä»£ç ä¸“ç”¨
- `qwen2.5` - ä¸­æ–‡æ”¯æŒå¥½
- `deepseek-coder` - ä»£ç åˆ†æå¼º

### Q: å“ªä¸ª LLM å¹³å°æ€§ä»·æ¯”æœ€é«˜ï¼Ÿ

| åœºæ™¯ | æ¨è | åŸå›  |
|------|------|------|
| å…è´¹ä½¿ç”¨ | Gemini / æ™ºè°± GLM-4-Flash | æœ‰å…è´¹é…é¢ |
| ä½æˆæœ¬ | DeepSeek | ä»·æ ¼ä»…ä¸º GPT-4 çš„ 1/10 |
| æœ€ä½³æ€§èƒ½ | GPT-4o / Claude Sonnet | ä»£ç ç†è§£èƒ½åŠ›æœ€å¼º |
| æ•æ„Ÿä»£ç  | Ollama æœ¬åœ°æ¨¡å‹ | å®Œå…¨æœ¬åœ°åŒ– |

---

## ç½‘ç»œé—®é¢˜

### Q: é‡åˆ°è¯·æ±‚è¶…æ—¶æ€ä¹ˆåŠï¼Ÿ

**æ–¹æ¡ˆä¸€ï¼šå¢åŠ è¶…æ—¶æ—¶é—´**

```env
LLM_TIMEOUT=300  # å¢åŠ åˆ° 300 ç§’
```

**æ–¹æ¡ˆäºŒï¼šä½¿ç”¨ API ä¸­è½¬ç«™**

```env
LLM_PROVIDER=openai
LLM_API_KEY=ä¸­è½¬ç«™æä¾›çš„Key
LLM_BASE_URL=https://your-proxy.com/v1
```

**æ–¹æ¡ˆä¸‰ï¼šåˆ‡æ¢åˆ°å›½å†…å¹³å°**

é€šä¹‰åƒé—®ã€DeepSeekã€æ™ºè°± AI ç­‰å›½å†…å¹³å°è®¿é—®æ›´ç¨³å®šã€‚

**æ–¹æ¡ˆå››ï¼šé™ä½å¹¶å‘**

```env
LLM_CONCURRENCY=1  # é™ä½å¹¶å‘æ•°
LLM_GAP_MS=3000    # å¢åŠ è¯·æ±‚é—´éš”
```

### Q: å¦‚ä½•é…ç½® API ä¸­è½¬ç«™ï¼Ÿ

```env
LLM_PROVIDER=openai
LLM_API_KEY=ä¸­è½¬ç«™æä¾›çš„Key
LLM_BASE_URL=https://your-proxy.com/v1
LLM_MODEL=gpt-4o-mini
```

å¸¸è§ä¸­è½¬ç«™ï¼š
- [OpenRouter](https://openrouter.ai/)
- [API2D](https://api2d.com/)
- [CloseAI](https://www.closeai-asia.com/)

### Q: æç¤º "API Key æ— æ•ˆ" æ€ä¹ˆåŠï¼Ÿ

1. æ£€æŸ¥ API Key æ˜¯å¦æ­£ç¡®å¤åˆ¶ï¼ˆæ³¨æ„å‰åç©ºæ ¼ï¼‰
2. ç¡®è®¤ API Key æœªè¿‡æœŸæˆ–è¢«ç¦ç”¨
3. æ£€æŸ¥ LLM_PROVIDER æ˜¯å¦ä¸ API Key åŒ¹é…
4. å¦‚æœä½¿ç”¨ä¸­è½¬ç«™ï¼Œç¡®è®¤ LLM_BASE_URL é…ç½®æ­£ç¡®

---

## åŠŸèƒ½ä½¿ç”¨

### Q: å¦‚ä½•åˆ†æ GitHub/GitLab ä»“åº“ï¼Ÿ

1. åœ¨"é¡¹ç›®ç®¡ç†"é¡µé¢ç‚¹å‡»"æ·»åŠ é¡¹ç›®"
2. é€‰æ‹©"GitHub ä»“åº“"æˆ–"GitLab ä»“åº“"
3. è¾“å…¥ä»“åº“ URLï¼ˆå¦‚ `https://github.com/user/repo`ï¼‰
4. å¦‚æœæ˜¯ç§æœ‰ä»“åº“ï¼Œéœ€è¦é…ç½® Tokenï¼š
   - GitHub: åœ¨ `backend/.env` ä¸­è®¾ç½® `GITHUB_TOKEN`
   - GitLab: åœ¨ `backend/.env` ä¸­è®¾ç½® `GITLAB_TOKEN`

### Q: å¦‚ä½•ä¸Šä¼  ZIP æ–‡ä»¶åˆ†æï¼Ÿ

1. åœ¨"é¡¹ç›®ç®¡ç†"é¡µé¢ç‚¹å‡»"æ·»åŠ é¡¹ç›®"
2. é€‰æ‹©"ä¸Šä¼  ZIP"
3. é€‰æ‹©æœ¬åœ° ZIP æ–‡ä»¶ä¸Šä¼ 
4. ç³»ç»Ÿä¼šè‡ªåŠ¨è§£å‹å¹¶åˆ†æ

### Q: å¦‚ä½•ä½¿ç”¨å³æ—¶åˆ†æåŠŸèƒ½ï¼Ÿ

1. è®¿é—®"å³æ—¶åˆ†æ"é¡µé¢
2. ç›´æ¥ç²˜è´´ä»£ç ç‰‡æ®µ
3. é€‰æ‹©ç¼–ç¨‹è¯­è¨€
4. ç‚¹å‡»"åˆ†æ"æŒ‰é’®

### Q: å¦‚ä½•å¯¼å‡ºå®¡è®¡æŠ¥å‘Šï¼Ÿ

1. å®Œæˆä»£ç åˆ†æåï¼Œè¿›å…¥"å®¡è®¡æŠ¥å‘Š"é¡µé¢
2. ç‚¹å‡»"å¯¼å‡º"æŒ‰é’®
3. é€‰æ‹©å¯¼å‡ºæ ¼å¼ï¼š
   - **JSON**: ç»“æ„åŒ–æ•°æ®ï¼Œé€‚åˆç¨‹åºå¤„ç†
   - **PDF**: ä¸“ä¸šæŠ¥å‘Šï¼Œé€‚åˆäº¤ä»˜

### Q: åˆ†æç»“æœä¸å‡†ç¡®æ€ä¹ˆåŠï¼Ÿ

1. **åˆ‡æ¢æ›´å¼ºçš„æ¨¡å‹**ï¼šå¦‚ GPT-4oã€Claude Sonnet
2. **è°ƒæ•´æ¸©åº¦å‚æ•°**ï¼šé™ä½ `LLM_TEMPERATURE` åˆ° 0.1 ä»¥ä¸‹
3. **å¢åŠ ä¸Šä¸‹æ–‡**ï¼šç¡®ä¿ä»£ç æ–‡ä»¶å®Œæ•´
4. **äººå·¥å¤æ ¸**ï¼šAI åˆ†æç»“æœä»…ä¾›å‚è€ƒï¼Œå»ºè®®ç»“åˆäººå·¥å®¡æŸ¥

---

## éƒ¨ç½²é—®é¢˜

### Q: Docker å®¹å™¨å¯åŠ¨å¤±è´¥ï¼Ÿ

**ç«¯å£è¢«å ç”¨**ï¼š

```bash
# æ£€æŸ¥ç«¯å£å ç”¨
lsof -i :5173
lsof -i :8000
lsof -i :5432

# åœæ­¢å ç”¨è¿›ç¨‹æˆ–ä¿®æ”¹ docker-compose.yml ä¸­çš„ç«¯å£
```

**æ•°æ®åº“è¿æ¥å¤±è´¥**ï¼š

```bash
# ç¡®ä¿æ•°æ®åº“å…ˆå¯åŠ¨
docker-compose up -d db
docker-compose exec db pg_isready -U postgres
docker-compose up -d backend
```

### Q: Windows å¯¼å‡º PDF æŠ¥é”™æ€ä¹ˆåŠï¼Ÿ

PDF å¯¼å‡ºåŠŸèƒ½ä½¿ç”¨ WeasyPrint åº“ï¼Œåœ¨ Windows ç³»ç»Ÿä¸Šéœ€è¦å®‰è£… GTK ä¾èµ–ã€‚

**æ–¹æ³•ä¸€ï¼šä½¿ç”¨ MSYS2 å®‰è£…ï¼ˆæ¨èï¼‰**

```bash
# 1. ä¸‹è½½å¹¶å®‰è£… MSYS2: https://www.msys2.org/
# 2. æ‰“å¼€ MSYS2 ç»ˆç«¯ï¼Œæ‰§è¡Œï¼š
pacman -S mingw-w64-x86_64-pango mingw-w64-x86_64-gtk3

# 3. å°† MSYS2 çš„ bin ç›®å½•æ·»åŠ åˆ°ç³»ç»Ÿ PATHï¼š
# C:\msys64\mingw64\bin
```

**æ–¹æ³•äºŒï¼šä½¿ç”¨ GTK3 Runtime**

1. ä¸‹è½½ GTK3 Runtime: https://github.com/nickvidal/gtk3-runtime/releases
2. å®‰è£…åå°†å®‰è£…ç›®å½•æ·»åŠ åˆ°ç³»ç»Ÿ PATH

**æ–¹æ³•ä¸‰ï¼šä½¿ç”¨ Docker éƒ¨ç½²ï¼ˆæœ€ç®€å•ï¼‰**

```bash
docker-compose up -d backend
```

Docker é•œåƒå·²åŒ…å«æ‰€æœ‰ä¾èµ–ï¼Œæ— éœ€é¢å¤–é…ç½®ã€‚

### Q: macOS ä¸Š PDF å¯¼å‡ºæŠ¥é”™ï¼Ÿ

```bash
# å®‰è£…ä¾èµ–
brew install pango cairo gdk-pixbuf libffi

# é‡å¯åç«¯æœåŠ¡
```

### Q: å‰ç«¯æ— æ³•è¿æ¥åç«¯ APIï¼Ÿ

æ£€æŸ¥ `frontend/.env` ä¸­çš„ API åœ°å€é…ç½®ï¼š

```env
# æœ¬åœ°å¼€å‘
VITE_API_BASE_URL=http://localhost:8000/api/v1

# Docker Compose éƒ¨ç½²
VITE_API_BASE_URL=/api
```

### Q: æ•°æ®åº“è¿ç§»å¤±è´¥ï¼Ÿ

```bash
cd backend
source .venv/bin/activate

# æŸ¥çœ‹å½“å‰è¿ç§»çŠ¶æ€
alembic current

# é‡æ–°æ‰§è¡Œè¿ç§»
alembic upgrade head

# å¦‚æœæœ‰é—®é¢˜ï¼Œå¯ä»¥å›æ»š
alembic downgrade -1
```

---

## æ€§èƒ½ä¼˜åŒ–

### Q: åˆ†æé€Ÿåº¦å¤ªæ…¢æ€ä¹ˆåŠï¼Ÿ

**1. å¢åŠ å¹¶å‘æ•°**

```env
LLM_CONCURRENCY=5  # å¢åŠ å¹¶å‘ï¼ˆæ³¨æ„ API é™æµï¼‰
LLM_GAP_MS=500     # å‡å°‘è¯·æ±‚é—´éš”
```

**2. é™åˆ¶åˆ†ææ–‡ä»¶æ•°**

```env
MAX_ANALYZE_FILES=30  # å‡å°‘å•æ¬¡åˆ†ææ–‡ä»¶æ•°
```

**3. ä½¿ç”¨æ›´å¿«çš„æ¨¡å‹**

- `gpt-4o-mini` æ¯” `gpt-4o` å¿«
- `qwen-turbo` æ¯” `qwen-max` å¿«
- `glm-4-flash` æ¯” `glm-4` å¿«

**4. ä½¿ç”¨æœ¬åœ°æ¨¡å‹**

Ollama æœ¬åœ°æ¨¡å‹æ²¡æœ‰ç½‘ç»œå»¶è¿Ÿï¼Œé€‚åˆå¤§é‡æ–‡ä»¶åˆ†æã€‚

### Q: å¦‚ä½•å‡å°‘ API è°ƒç”¨è´¹ç”¨ï¼Ÿ

1. **ä½¿ç”¨ä¾¿å®œçš„æ¨¡å‹**ï¼šDeepSeekã€é€šä¹‰åƒé—® Turbo
2. **å‡å°‘åˆ†ææ–‡ä»¶æ•°**ï¼šè®¾ç½® `MAX_ANALYZE_FILES`
3. **è¿‡æ»¤ä¸å¿…è¦çš„æ–‡ä»¶**ï¼šæ’é™¤æµ‹è¯•æ–‡ä»¶ã€é…ç½®æ–‡ä»¶ç­‰
4. **ä½¿ç”¨æœ¬åœ°æ¨¡å‹**ï¼šOllama å®Œå…¨å…è´¹

### Q: å†…å­˜å ç”¨è¿‡é«˜ï¼Ÿ

1. **å‡å°‘å¹¶å‘æ•°**ï¼š`LLM_CONCURRENCY=1`
2. **é™åˆ¶æ–‡ä»¶å¤§å°**ï¼š`MAX_FILE_SIZE_BYTES=102400`ï¼ˆ100KBï¼‰
3. **ä½¿ç”¨æ›´å°çš„æœ¬åœ°æ¨¡å‹**ï¼šå¦‚ `deepseek-coder:1.3b`

---

## æ•°æ®ç®¡ç†

### Q: å¦‚ä½•å¤‡ä»½æ•°æ®ï¼Ÿ

åœ¨ `/admin` é¡µé¢çš„"æ•°æ®åº“ç®¡ç†"æ ‡ç­¾é¡µä¸­ï¼Œç‚¹å‡»"å¯¼å‡ºæ•°æ®"æŒ‰é’®ï¼Œå¯ä»¥å°†æ‰€æœ‰æ•°æ®å¯¼å‡ºä¸º JSON æ–‡ä»¶ã€‚

ä¹Ÿå¯ä»¥ç›´æ¥å¤‡ä»½ PostgreSQL æ•°æ®åº“ï¼š

```bash
# å¯¼å‡ºæ•°æ®
docker-compose exec db pg_dump -U postgres xcodereviewer > backup.sql

# æ¢å¤æ•°æ®
docker-compose exec -T db psql -U postgres xcodereviewer < backup.sql
```

### Q: å¦‚ä½•æ¢å¤æ•°æ®ï¼Ÿ

åœ¨ `/admin` é¡µé¢çš„"æ•°æ®åº“ç®¡ç†"æ ‡ç­¾é¡µä¸­ï¼Œç‚¹å‡»"å¯¼å…¥æ•°æ®"æŒ‰é’®ï¼Œé€‰æ‹©ä¹‹å‰å¯¼å‡ºçš„ JSON æ–‡ä»¶å³å¯æ¢å¤ã€‚

### Q: å¦‚ä½•æ¸…ç©ºæ‰€æœ‰æ•°æ®ï¼Ÿ

åœ¨ `/admin` é¡µé¢çš„"æ•°æ®åº“ç®¡ç†"æ ‡ç­¾é¡µä¸­ï¼Œç‚¹å‡»"æ¸…ç©ºæ•°æ®"æŒ‰é’®ã€‚

âš ï¸ **è­¦å‘Š**ï¼šæ­¤æ“ä½œä¸å¯æ¢å¤ï¼Œè¯·å…ˆå¤‡ä»½é‡è¦æ•°æ®ï¼

---

## å…¶ä»–é—®é¢˜

### Q: å¦‚ä½•æ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Ÿ

```bash
# æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# é‡æ–°æ„å»ºé•œåƒ
docker-compose build --no-cache

# é‡å¯æœåŠ¡
docker-compose up -d
```

### Q: å¦‚ä½•å‚ä¸è´¡çŒ®ï¼Ÿ

å‚è§ [è´¡çŒ®æŒ‡å—](../CONTRIBUTING.md)ã€‚

---

## è¿˜æœ‰é—®é¢˜ï¼Ÿ

å¦‚æœä»¥ä¸Šå†…å®¹æ²¡æœ‰è§£å†³ä½ çš„é—®é¢˜ï¼Œæ¬¢è¿ï¼š

- æäº¤ [GitHub Issue](https://github.com/lintsinghua/XCodeReviewer/issues)
- å‘é€é‚®ä»¶è‡³ lintsinghua@qq.com

æé—®æ—¶è¯·æä¾›ï¼š
1. æ“ä½œç³»ç»Ÿå’Œç‰ˆæœ¬
2. éƒ¨ç½²æ–¹å¼ï¼ˆDocker/æœ¬åœ°ï¼‰
3. é”™è¯¯æ—¥å¿—æˆ–æˆªå›¾
4. å¤ç°æ­¥éª¤
